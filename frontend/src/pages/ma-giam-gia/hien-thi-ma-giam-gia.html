<main class="content">
    <div class="container-fluid p-0">
<div class="card d-flex align-self-center  w-auto">
    <div class="card-header">
        <div class="row align-self-center">
            <div class="col-md-4 "> </div>
            <div class="col-md-4 align-self-center">

                <h3 class="card-title mb-0">DANH SÁCH MÃ GIẢM GIÁ </h3>
            </div>
            <div class="col-md-4 "> </div>

        </div>
    </div>
    <br>
    <br>
    <div class="card-body d-flex align-self-center w-auto">
        <div class="align-self-center w-auto">

            <div class="row">

                <div class="col-md-4">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <form>
                            <input id="searchtxt" type="text" placeholder="Tìm kiếm theo mã, tên"
                                   class="search-input"/>
                            <input type="submit" ng-hide="true" ng-click="searching($event)"/>
                        </form>
                    </div>
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-3">
                    <div class="col-md-10">
                        <select id="searchsel" class="form-select" aria-label="Default select example" >
                            <option value="" selected disabled hidden>Trạng Thái Mã Giảm Giá</option>
                            <option value="1">Sắp diễn ra</option>
                            <option value="2">Đang diễn ra</option>
                            <option value="3">Đã hết hạn</option>
                        </select>
                    </div>

                </div>
                <div class="col-md-4">
                    <label class="col-form-label">Hình Thức Giảm Giá:</label>
                    <div class="col-sm-4">

                        <input name="searchtype" type="radio" value="0" class="form-check-input">
                        <label class="form-check-label">
                            Tiền mặt
                        </label>
                        <br>
                        <input name="searchtype" type="radio" value="1" class="form-check-input">
                        <label class="form-check-label">
                            Phần trăm
                        </label>

                    </div>
                </div>
            </div>

            <br />
            <div class="row">
                <div class="col-md-4"></div>
                <div class="col-md-6"></div>
                <div class="col-md-2">
                    <a type="button" class="btn btn-primary" href="#/ma-giam-gia/add">Thêm mã</a>
                </div>
            </div>
            <br>
            <table class="table table-light table-striped table-hover">
                <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col">Mã</th>
                    <th scope="col">Tên</th>
                    <th scope="col">Hình Thức </th>
                    <th scope="col">GT Đơn Tối Thiểu</th>
                    <th scope="col">Giảm Tối Đa</th>
                    <th scope="col">Ngày bắt đầu</th>
                    <th scope="col">Ngày kết thúc</th>
                    <th scope="col">Số lượng</th>
                    <th scope="col">Trạng thái</th>
                    <th scope="col">Thao tác</th>
                </tr>
                </thead>
                <tbody ng-repeat="maGiamGia in listMaGiamGia.content">
                <tr ng-hide="(searchDat.search.length != 0) ? ((maGiamGia.ma.includes(searchDat.search)) ? ((searchDat.type.length != 0) ? ((maGiamGia.hinhThucGiam == searchDat.type) ? ((maGiamGia.hinhThucGiam == searchDat.type) ? ((searchDat.select.length != 0) ? (!(maGiamGia.trangThai == searchDat.select)) : false) : false) : true) : ((searchDat.select.length != 0) ? (!(maGiamGia.trangThai == searchDat.select)) : false)) : ((maGiamGia.tenKM.includes(searchDat.search)) ? ((searchDat.type.length != 0) ? ((maGiamGia.hinhThucGiam == searchDat.type) ? ((maGiamGia.hinhThucGiam == searchDat.type) ? ((searchDat.select.length != 0) ? (!(maGiamGia.trangThai == searchDat.select)) : false) : false) : true) : ((searchDat.select.length != 0) ? (!(maGiamGia.trangThai == searchDat.select)) : false)) : true)) : ((searchDat.type.length != 0) ? ((maGiamGia.hinhThucGiam == searchDat.type) ? ((searchDat.select.length != 0) ? (!(maGiamGia.trangThai == searchDat.select)) : false) : true) : ((searchDat.select.length != 0) ? (!(maGiamGia.trangThai == searchDat.select)) : false))">
                    <th scope="col">
                        <a href="{{maGiamGia.trangThai =='3'?'#ma-giam-gia/ma-giam-gia-chi-tiet/detail/'+maGiamGia.id : ''}}">
                            <i class="{{maGiamGia.trangThai =='3'?'align-middle me-2 fas fa-fw fa-info-circle' : ''}}"></i>
                        </a>

                    </th>
                    <th>{{maGiamGia.ma}}</th>
                    <th>{{maGiamGia.tenKM}}</th>
                    <th>
                        <p>
                            {{maGiamGia.hinhThucGiam =='0'? "Tiền mặt" : "Phần trăm"}}
                        </p>
                    </th>
                    <th>{{maGiamGia.giaTriDonToiThieu}}</th>
                    <th>{{maGiamGia.giaTriGiamToiDa}}</th>
                    <th>{{maGiamGia.ngayBatDau | date: 'dd/MM/yyyy hh:mm a'}}</th>
                    <th>{{maGiamGia.ngayKetThuc | date: 'dd/MM/yyyy hh:mm a'}}</th>
                    <th>{{maGiamGia.soLuong}}</th>
                    <th>
                        <p>
                            {{maGiamGia.trangThai =='1'? "Sắp diễn ra" : (maGiamGia.trangThai =='2'? "Đang diễn ra" : "Đã hết hạn")}}
                        </p>
                    </th>
                    <th>
                        <a  href="{{maGiamGia.trangThai =='1'? '#ma-giam-gia/update/'+maGiamGia.id : '#ma-giam-gia/hienthi'}}">
                            <i class="{{maGiamGia.trangThai =='1'? 'align-middle me-2 fas fa-fw fa-edit' : ''}}"></i>
                        </a>
                    </th>

                </tr>
                </tbody>
            </table>

            <div class="row mt-4">
                <div class="col-md-12">
                    <nav aria-label="Page navigation example">
                        <ul class="pagination justify-content-center">
                            <li class="page-item">
                                <a
                                        class="page-link"
                                        ng-click="previousPage()"
                                        aria-label="Previous"
                                >
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li
                                    class="page-item"
                                    ng-repeat="page in visiblePages"
                                    ng-class="{ 'active': page.active === 'active' }"
                            >
                                <a class="page-link" ng-click="changePage(page.page - 1)"
                                >{{ page.page }}</a
                                >
                            </li>
                            <li class="page-item">
                                <a class="page-link" ng-click="nextPage()"> &raquo; </a>
                            </li>
                        </ul>
                    </nav>
                </div>
                <p>Tổng số trang: {{ totalPages.length }}</p>
            </div>
        </div>
    </div>
</div>
    </div>
    </main>